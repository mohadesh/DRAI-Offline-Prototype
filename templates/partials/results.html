{% if error %}
<div class="rounded-xl border border-red-200 bg-red-50 p-4 text-red-800 shadow-sm dark:border-red-800 dark:bg-red-900/30 dark:text-red-200">
  <p class="font-medium">{{ error }}</p>
</div>
{% else %}
<div class="space-y-4">
  <div class="rounded-xl border border-slate-200 bg-slate-50 p-4 text-slate-700 shadow-sm dark:border-zinc-600 dark:bg-zinc-900 dark:text-zinc-300">
    <p class="font-medium">{{ stats.message }}</p>
    <p class="mt-1 text-sm dark:text-zinc-400">Rows: {{ stats.rows }} â€” Columns: {{ stats.columns }}{% if stats.preview_rows %} (preview {{ stats.preview_rows }} rows){% endif %}</p>
  </div>
  {% if preview_data %}
  <div class="overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm dark:border-zinc-600 dark:bg-zinc-900">
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-slate-200 text-left text-sm dark:divide-zinc-600">
        <thead class="bg-slate-100 dark:bg-zinc-700">
          <tr>
            {% for key in preview_data[0].keys() %}
            <th class="px-4 py-3 font-semibold text-slate-700 dark:text-zinc-200">{{ key }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100 dark:divide-zinc-600">
          {% for row in preview_data %}
          <tr class="hover:bg-slate-50 dark:hover:bg-zinc-700/50">
            {% for key, value in row.items() %}
            <td class="px-4 py-2 text-slate-800 dark:text-zinc-200">{{ value }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <p class="text-slate-600 dark:text-zinc-400">No data to display.</p>
  {% endif %}
</div>
{% endif %}
